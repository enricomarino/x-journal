<link rel="import" href="/components/polymer/polymer.html">
<dom-module id="part-pages">
  <style>
    :host {
      display: block;
    }

    .links {
      margin-top: 20px;
      font-size: 18px;
      font-weight: 800;
      text-align: center;
    }

    .link {
      display: inline-block;
      padding: 10px;
      text-decoration: none;
      color: #3d3d3d;
    }
  </style>
  <template>

    <div class="links">
      <template id="items" is="dom-repeat" items="{{pages}}">
        <a href="/" class="link" on-click="on_click">{{item}}</a>
      </template>
    </div>

  </template>
</dom-module>
<script>
  Polymer({

    is: 'part-pages',

    properties: {
      current: {
        type: Number,
        value: 0
      },
      count: {
        type: Number,
        value: 0
      },
      perpage: {
        type: Number,
        notify: true,
        value: 10
      },
      total: {
        type: Number
      },
      pages: {
        type: Array
      },
      page: {
        notify: true
      }
    },

    observers: [
      'on_change_params(count, perpage)'
    ],

    on_change_params: function (count, perpage) {
      this.total = Math.ceil(count / perpage);
      this.pages = Array.apply(null, Array(this.total)).map(function (_, i) { return i + 1; });
    },

    on_click: function (event) {
      event.preventDefault();
      this.page = this.$.items.itemForElement(event.target) - 1;
      this.fire('select', { page: this.page });
    }

  });
</script>