<link rel="import" href="/components/polymer/polymer.html">
<link rel="import" href="/elements/api-model-find/api-model-find.html">
<dom-module id="field-article-author">
  <style>
    :host {
      display: block;
    }
  </style>
  <template>

    <api-model-find id="find" collection="Authors"
      response="{{items}}">
    </api-model-find>

    <select id="select" on-change="on_value_change">
      <option disabled></option>
      <template is="dom-repeat" items="{{items}}">
        <option value="{{item.id}}">{{item.fullname}}</option>
      </template>
    </select>

  </template>
</dom-module>
<script>
  Polymer({

    is: 'field-article-author',

    properties: {
      bindValue: {
        type: String,
        observer: 'on_bind_value_change',
        notify: true
      },
      items: {
        type: Array
      }
    },

    ready: function () {
      this.$.find.send();
    },

    on_bind_value_change: function () {
      this.$.select.value = !this.bindValue ? '' : this.bindValue;
    },

    on_value_change: function () {
      this.bindValue = this.$.select.value;
    }

  });
</script>